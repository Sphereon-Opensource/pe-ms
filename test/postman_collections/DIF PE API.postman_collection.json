{
	"info": {
		"_postman_id": "174de53e-42ab-425a-8df7-f4091142c87b",
		"name": "DIF PE API",
		"description": "Decentralized Identity Foundation Presentation Exchange API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create thread",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/pe/v1/threads",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"threads"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create definition",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"thread\": {\r\n        \"id\": \"93670465-7611-4348-b252-89abd338d650\"\r\n    },\r\n    \"presentation_definition\": {\r\n        \"id\": \"test\",\r\n        \"input_descriptors\": [\r\n            {\r\n                \"id\": \"test\",\r\n                \"schema\": [\r\n                    {\r\n                        \"uri\": \"http://test.com\"\r\n                    }\r\n                ],\r\n                \"constraints\": {\r\n                    \"limit_disclosure\": \"required\",\r\n                    \"fields\": [\r\n                        {\r\n                            \"path\": [\r\n                                \"$.issuer\",\r\n                                \"$.vc.issuer\",\r\n                                \"$.iss\"\r\n                            ],\r\n                            \"purpose\": \"We can only verify bank accounts if they are attested by a trusted bank, auditor, or regulatory authority.\",\r\n                            \"filter\": {\r\n                                \"type\": \"string\",\r\n                                \"pattern\": \"did:example:123|did:example:456\"\r\n                            }\r\n                        }\r\n                    ],\r\n                    \"statuses\": {\r\n                        \"active\": {\r\n                            \"directive\": \"required\"\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                \"id\": \"test1\",\r\n                \"schema\": [\r\n                    {\r\n                        \"uri\": \"http://test.com\"\r\n                    }\r\n                ],\r\n                \"constraints\": {\r\n                    \"statuses\": {\r\n                        \"active\": {\r\n                            \"directive\": \"allowed\"\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                \"id\": \"test2\",\r\n                \"schema\": [\r\n                    {\r\n                        \"uri\": \"http://test.com\"\r\n                    }\r\n                ],\r\n                \"constraints\": {\r\n                    \"statuses\": {\r\n                        \"active\": {\r\n                            \"directive\": \"disallowed\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}"
				},
				"url": {
					"raw": "{{host}}/pe/v1/definitions",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"definitions"
					],
					"query": [
						{
							"key": "",
							"value": "",
							"disabled": true
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Retrieve definition",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/pe/v1/definitions/61c1ea30221f51c2b6078c92",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"definitions",
						"61c1ea30221f51c2b6078c92"
					]
				}
			},
			"response": []
		},
		{
			"name": "Retrieve definition statuses",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/pe/v1/definitions/61923fa1e91d4b002b35570c/statuses",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"definitions",
						"61923fa1e91d4b002b35570c",
						"statuses"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create presentation",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"presentation\": {\r\n        \"@context\": [\r\n            \"https://www.w3.org/2018/credentials/v1\",\r\n            \"https://identity.foundation/presentation-exchange/submission/v1\"\r\n        ],\r\n        \"type\": [\r\n            \"VerifiablePresentation\",\r\n            \"PresentationSubmission\"\r\n        ],\r\n        \"presentation_submission\": {\r\n            \"id\": \"a30e3b91-fb77-4d22-95fa-871689c322e2\",\r\n            \"definition_id\": \"32f54163-7166-48f1-93d8-ff217bdb0653\",\r\n            \"descriptor_map\": [\r\n                {\r\n                    \"id\": \"banking_input_2\",\r\n                    \"format\": \"jwt_vc\",\r\n                    \"path\": \"$.verifiableCredential[0]\"\r\n                },\r\n                {\r\n                    \"id\": \"employment_input\",\r\n                    \"format\": \"ldp_vc\",\r\n                    \"path\": \"$.verifiableCredential[1]\"\r\n                },\r\n                {\r\n                    \"id\": \"citizenship_input_1\",\r\n                    \"format\": \"ldp_vc\",\r\n                    \"path\": \"$.verifiableCredential[2]\"\r\n                }\r\n            ]\r\n        },\r\n        \"verifiableCredential\": [\r\n            {\r\n                \"comment\": \"IN REALWORLD VPs, THIS WILL BE A BIG UGLY OBJECT INSTEAD OF THE DECODED JWT PAYLOAD THAT FOLLOWS\",\r\n                \"vc\": {\r\n                    \"@context\": \"https://www.w3.org/2018/credentials/v1\",\r\n                    \"id\": \"https://eu.com/claims/DriversLicense\",\r\n                    \"type\": [\r\n                        \"EUDriversLicense\"\r\n                    ],\r\n                    \"issuer\": \"did:example:123\",\r\n                    \"issuanceDate\": \"2010-01-01T19:73:24Z\",\r\n                    \"credentialSubject\": {\r\n                        \"id\": \"did:example:ebfeb1f712ebc6f1c276e12ec21\",\r\n                        \"accounts\": [\r\n                            {\r\n                                \"id\": \"1234567890\",\r\n                                \"route\": \"DE-9876543210\"\r\n                            },\r\n                            {\r\n                                \"id\": \"2457913570\",\r\n                                \"route\": \"DE-0753197542\"\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                \"@context\": \"https://www.w3.org/2018/credentials/v1\",\r\n                \"id\": \"https://business-standards.org/schemas/employment-history.json\",\r\n                \"type\": [\r\n                    \"VerifiableCredential\",\r\n                    \"GenericEmploymentCredential\"\r\n                ],\r\n                \"issuer\": \"did:foo:123\",\r\n                \"issuanceDate\": \"2010-01-01T19:73:24Z\",\r\n                \"credentialSubject\": {\r\n                    \"id\": \"did:example:ebfeb1f712ebc6f1c276e12ec21\",\r\n                    \"active\": true\r\n                },\r\n                \"proof\": {\r\n                    \"type\": \"EcdsaSecp256k1VerificationKey2019\",\r\n                    \"created\": \"2017-06-18T21:19:10Z\",\r\n                    \"proofPurpose\": \"assertionMethod\",\r\n                    \"verificationMethod\": \"https://example.edu/issuers/keys/1\",\r\n                    \"jws\": \"...\"\r\n                }\r\n            },\r\n            {\r\n                \"@context\": \"https://www.w3.org/2018/credentials/v1\",\r\n                \"id\": \"https://eu.com/claims/DriversLicense\",\r\n                \"type\": [\r\n                    \"EUDriversLicense\"\r\n                ],\r\n                \"issuer\": \"did:foo:123\",\r\n                \"issuanceDate\": \"2010-01-01T19:73:24Z\",\r\n                \"credentialSubject\": {\r\n                    \"id\": \"did:example:ebfeb1f712ebc6f1c276e12ec21\",\r\n                    \"license\": {\r\n                        \"number\": \"34DGE352\",\r\n                        \"dob\": \"07/13/80\"\r\n                    }\r\n                },\r\n                \"proof\": {\r\n                    \"type\": \"RsaSignature2018\",\r\n                    \"created\": \"2017-06-18T21:19:10Z\",\r\n                    \"proofPurpose\": \"assertionMethod\",\r\n                    \"verificationMethod\": \"https://example.edu/issuers/keys/1\",\r\n                    \"jws\": \"...\"\r\n                }\r\n            }\r\n        ],\r\n        \"proof\": {\r\n            \"type\": \"RsaSignature2018\",\r\n            \"created\": \"2018-09-14T21:19:10Z\",\r\n            \"proofPurpose\": \"authentication\",\r\n            \"verificationMethod\": \"did:example:ebfeb1f712ebc6f1c276e12ec21#keys-1\",\r\n            \"challenge\": \"1f44d55f-f161-4938-a659-f8026467f126\",\r\n            \"domain\": \"4jt78h47fh47\",\r\n            \"jws\": \"...\"\r\n        }\r\n    },\r\n    \"challenge\": {\r\n        \"token\": \"40b6a5b86d8e6afca505ecf3ac8812c915c7ea4d17f20aebb596082f7f3103b2730b5899a38ca1e41052184cf800ba671f3d8055fa2d1f94442239f1ff74948b\"\r\n    },\r\n    \"pdId\": \"61c4801c9748884d315f6491\"\r\n}"
				},
				"url": {
					"raw": "{{host}}/pe/v1/presentations",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"presentations"
					]
				}
			},
			"response": []
		},
		{
			"name": "Retrieve presentation",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/pe/v1/presentations/6192463e9d733e002cf4c652",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"presentations",
						"6192463e9d733e002cf4c652"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update status",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n     \"presentation_id\": \"test\",\r\n        \"status\": \"ACCEPTED\"\r\n}"
				},
				"url": {
					"raw": "{{host}}/pe/v1/presentations/1/statuses",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"presentations",
						"1",
						"statuses"
					]
				}
			},
			"response": []
		},
		{
			"name": "Retrieve presentation statuses",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/pe/v1/presentations/618e70cfcda5151edec18fba/statuses",
					"host": [
						"{{host}}"
					],
					"path": [
						"pe",
						"v1",
						"presentations",
						"618e70cfcda5151edec18fba",
						"statuses"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "protocol",
			"value": "https",
			"type": "any",
			"description": " (This can only be one of http,https)"
		},
		{
			"key": "environment",
			"value": "api.dev",
			"type": "any",
			"description": " (This can only be one of api,api.dev,api.staging)"
		},
		{
			"key": "projectName",
			"value": "pe",
			"type": "any",
			"description": "Project Name"
		},
		{
			"key": "port",
			"value": "443",
			"type": "any",
			"description": " (This can only be one of 443,8443)"
		},
		{
			"key": "baseUrl",
			"value": "{{protocol}}://{{environment}}.{{projectName}}.sphereon.io:{{port}}/pe",
			"type": "string"
		}
	]
}